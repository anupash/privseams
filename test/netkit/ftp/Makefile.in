##
## settings
##
prefix=@prefix@
exec_prefix=@exec_prefix@
sbindir=@sbindir@
bindir=@bindir@
mandir=@mandir@

##
## autoconf
##
CPP=@CPP@
CXXCPP=@CXXCPP@
CC=@CC@
CXX=@CXX@
DEFS=-D_USAGI -DINET6 @DEFS@
CFLAGS=@CFLAGS@ $(DEFS)
CXXFLAGS=@CXXFLAGS@ $(DEFS)

OBJS=
LIBOBJS=@LIBOBJS@
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@

INSTALL=@INSTALL@
INSTALL_PROG=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_DIR=@INSTALL_DIR@

LN_S=@LN_S@

##
## targets
##
TARGET = ftp

all:	$(TARGET)

clean:
	-rm -f *.o $(TARGET)
distclean: clean
	-rm -f config.*
	-rm -f Makefile

install: all
	$(INSTALL_DIR) $(bindir)
	$(INSTALL_PROG) -s ftp $(bindir)
	$(LN_S) -f ftp $(bindir)/pftp
	$(INSTALL_DIR) $(mandir)/man1
	$(INSTALL_DATA) ftp.1 $(mandir)/man1
	$(LN_S) -f ftp.1 $(mandir)/man1/pftp.1
	$(INSTALL_DIR) $(mandir)/man5
	$(INSTALL_DATA) netrc.5 $(mandir)/man5
##
## dependencies
##
ifeq ($(USE_READLINE),1)
CFLAGS += -D__USE_READLINE__
LIBS += -lreadline $(LIBTERMCAP)
endif

ftp: cmds.o cmdtab.o domacro.o ftp.o glob.o main.o ruserpass.o
	$(CC) $(LDFLAGS) $^ $(LIBS) -o $@

domacro.o ftp.o glob.o main.o ruserpass.o: ftp_var.h pathnames.h
cmds.o cmdtab.o: ftp_var.h pathnames.h cmds.h
cmds.o glob.o: glob.h

