AC_INIT(ftpd.c)
AC_PREFIX_DEFAULT(/usr/local/v6)

AC_PROG_CC
AC_PROG_CPP
AC_PROG_YACC
AC_PROG_LN_S
AC_PROG_INSTALL
INSTALL_LIB="\${INSTALL_DATA}"
AC_SUBST(INSTALL_LIB)
INSTALL_DIR="\${INSTALL} -d"
AC_SUBST(INSTALL_DIR)

AC_CHECK_LIB(crypt, crypt)

AC_CHECK_HEADER(shadow.h,
	CFLAGS="$CFLAGS -DUSE_SHADOW=1",
	CFLAGS="$CFLAGS -DUSE_SHADOW=0")

AC_REPLACE_FUNCS(daemon setproctitle isexpired vis)

CFLAGS="$CFLAGS -DHASSETPROCTITLE -I."
#BEGIN HIPL PATCH
# define either HIP_NATIVE or HIP_LEGACY
CFLAGS="$CFLAGS -I../../../tools -I../../../libinet6/include -I../../.. -I../../../linux/include -I../../../linux/net/ipv6/hip -DHIP_NATIVE -g"
LIBS="-L../../../libinet6 -linet6 -lcrypto $LIBS"
#END HIPL PATCH

AC_OUTPUT(Makefile)
